<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Alt Nivel Studio</title>
  <link rel="stylesheet" href="style.css">
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
  <style>
    /* WordPress Download Button */
    .wp-download-btn {
      position: fixed;
      bottom: 32px;
      right: 32px;
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 16px 28px;
      background: linear-gradient(135deg, #3d3d3d 0%, #5a5a5a 100%);
      color: #fff;
      font-family: var(--font-body);
      font-size: 0.9375rem;
      font-weight: 500;
      text-decoration: none;
      border: none;
      border-radius: 100px;
      cursor: pointer;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
      z-index: 9999;
    }
    .wp-download-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
    }
    .wp-download-btn ion-icon {
      font-size: 1.25rem;
    }
    .wp-download-tooltip {
      position: absolute;
      bottom: 100%;
      right: 0;
      margin-bottom: 12px;
      padding: 12px 16px;
      background: #3d3d3d;
      color: #fff;
      font-size: 0.8125rem;
      border-radius: 8px;
      white-space: nowrap;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    .wp-download-btn:hover .wp-download-tooltip {
      opacity: 1;
      visibility: visible;
    }
    .wp-download-tooltip::after {
      content: '';
      position: absolute;
      top: 100%;
      right: 24px;
      border: 6px solid transparent;
      border-top-color: #3d3d3d;
    }
  </style>
</head>
<body>
  <div id="app"></div>

  <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script>
    async function loadContent() {
      try {
        const res = await fetch('content.md');
        const text = await res.text();

        // Parse frontmatter
        const match = text.match(/^---\n([\s\S]*?)\n---\n([\s\S]*)$/);
        if (!match) {
          console.error('Could not parse frontmatter');
          return;
        }
        const meta = jsyaml.load(match[1]);
        const markdown = match[2];

        // Parse markdown sections
        const sections = {};
        let currentSection = 'intro';
        markdown.split('\n').forEach(line => {
          if (line.startsWith('## ')) {
            currentSection = line.replace('## ', '').toLowerCase()
              .normalize('NFD').replace(/[\u0300-\u036f]/g, '')
              .replace(/[^a-z0-9]+/g, '_');
          }
          sections[currentSection] = (sections[currentSection] || '') + line + '\n';
        });

        // Update title
        document.title = `${meta.title} - Alt Nivel Studio`;

        // Platform icon helper
        const platformIcon = (platform) => {
          const icons = {
            youtube: 'logo-youtube',
            spotify: 'logo-soundcloud',
            apple: 'logo-apple',
            default: 'play-circle-outline'
          };
          return icons[platform] || icons.default;
        };

        // Render
        document.getElementById('app').innerHTML = `
          <header class="hero">
            <div class="container">
              <h1>${meta.title}</h1>
              <p class="subtitle">${meta.subtitle || ''}</p>
            </div>
          </header>

          <main>
            <section class="intro">
              <div class="container">
                <h2>Despre ce e vorba?</h2>
                ${marked.parse((sections.despre_ce_e_vorba_ || sections.intro || '').replace(/^##[^\n]*\n/, ''))}
              </div>
            </section>

            <section class="podcasts">
              <div class="container">
                <h2>Podcasturi realizate în studio</h2>
                <div class="podcasts-list">
                  ${(meta.podcasts || []).map(podcast => `
                    <div class="podcast-card">
                      <div class="podcast-header">
                        <div class="podcast-info">
                          <h3>${podcast.name}</h3>
                          <p class="podcast-description">${podcast.description}</p>
                          <p class="podcast-host">
                            <ion-icon name="person-outline"></ion-icon>
                            ${podcast.host}
                          </p>
                        </div>
                        <a href="${podcast.url}" target="_blank" class="podcast-link">
                          <ion-icon name="${platformIcon(podcast.platform)}"></ion-icon>
                          Vezi toate episoadele
                        </a>
                      </div>
                      <div class="episodes-grid">
                        ${(podcast.episodes || []).map(ep => `
                          <a href="${ep.url}" target="_blank" class="episode-card">
                            <span class="episode-title">${ep.title}</span>
                            <span class="episode-duration">
                              <ion-icon name="time-outline"></ion-icon>
                              ${ep.duration}
                            </span>
                          </a>
                        `).join('')}
                      </div>
                    </div>
                  `).join('')}
                </div>
              </div>
            </section>

            <section class="format">
              <div class="container">
                <h2>Ce oferim</h2>
                <ul class="format-list">
                  ${(meta.format || []).map(item => `
                    <li>
                      <ion-icon name="${item.icon}"></ion-icon>
                      <span>${item.text}</span>
                    </li>
                  `).join('')}
                </ul>
              </div>
            </section>

            <section class="packages">
              <div class="container">
                <h2>Pachete</h2>
                <div class="packages-grid">
                  ${(meta.packages || []).map(pkg => `
                    <div class="package-card ${pkg.highlight ? 'highlighted' : ''}">
                      <h3 class="package-name">${pkg.name}</h3>
                      <div class="price">
                        <span class="amount">${pkg.price}</span>
                        <span class="currency">${pkg.currency}</span>
                        <span class="note">+ TVA / episod</span>
                      </div>
                      <ul class="deliverables">
                        ${(pkg.deliverables || []).map(item => `
                          <li>
                            <ion-icon name="checkmark-circle-outline"></ion-icon>
                            <span>${item}</span>
                          </li>
                        `).join('')}
                      </ul>
                    </div>
                  `).join('')}
                </div>
                <p class="payment-terms">
                  <ion-icon name="information-circle-outline"></ion-icon>
                  ${meta.payment_terms || ''}
                </p>
              </div>
            </section>

            <section class="team">
              <div class="container">
                <h2>Echipa</h2>
                <div class="team-grid">
                  ${(meta.team || []).map(m => `
                    <div class="team-member">
                      <h3>${m.name}</h3>
                      <p>${m.role}</p>
                    </div>
                  `).join('')}
                </div>
              </div>
            </section>

            <section class="ideal-for">
              <div class="container">
                <h2>Pentru cine e acest serviciu?</h2>
                <ul class="ideal-list">
                  ${(meta.ideal_for || []).map(item => `<li>${item}</li>`).join('')}
                </ul>
              </div>
            </section>

            <section class="cta">
              <div class="container">
                <h2>Hai să vorbim</h2>
                <p>${meta.cta_subtitle || ''}</p>
                <form class="reservation-form" id="reservationForm">
                  <div class="form-row">
                    ${(meta.form_fields || []).slice(0, 2).map(f => `
                      <div class="form-group">
                        <label for="${f.name}">${f.label}</label>
                        <input type="${f.type}" id="${f.name}" name="${f.name}" ${f.required ? 'required' : ''}>
                      </div>
                    `).join('')}
                  </div>
                  <div class="form-row">
                    ${(meta.form_fields || []).slice(2, 4).map(f => `
                      <div class="form-group">
                        <label for="${f.name}">${f.label}</label>
                        <input type="${f.type}" id="${f.name}" name="${f.name}" ${f.required ? 'required' : ''}>
                      </div>
                    `).join('')}
                  </div>
                  ${(meta.form_fields || []).slice(4).map(f => `
                    <div class="form-group">
                      <label for="${f.name}">${f.label}</label>
                      ${f.type === 'textarea'
                        ? `<textarea id="${f.name}" name="${f.name}" rows="4" ${f.required ? 'required' : ''}></textarea>`
                        : `<input type="${f.type}" id="${f.name}" name="${f.name}" ${f.required ? 'required' : ''}>`
                      }
                    </div>
                  `).join('')}
                  <button type="submit" class="submit-btn">
                    <ion-icon name="send-outline"></ion-icon>
                    Trimite mesajul
                  </button>
                </form>
              </div>
            </section>
          </main>

          <footer>
            <div class="container">
              <p>Alt Nivel Studio - Două etaje mai sus, infinit la creativitate</p>
              <div class="footer-links">
                <a href="https://www.altnivel.studio" target="_blank">
                  <ion-icon name="globe-outline"></ion-icon>
                  altnivel.studio
                </a>
                <a href="mailto:hello@altnivel.studio">
                  <ion-icon name="mail-outline"></ion-icon>
                  hello@altnivel.studio
                </a>
              </div>
            </div>
          </footer>

          <button class="wp-download-btn" onclick="downloadWordPressCode()">
            <ion-icon name="download-outline"></ion-icon>
            Descarcă cod WordPress
            <span class="wp-download-tooltip">Copiază în Code Editor din Gutenberg</span>
          </button>
        `;

        // Store meta for WordPress export
        window.pageMeta = meta;
        window.pageSections = sections;

      } catch (err) {
        console.error('Error loading content:', err);
        document.getElementById('app').innerHTML = '<p>Error loading content. Check console.</p>';
      }
    }

    function downloadWordPressCode() {
      const meta = window.pageMeta;
      const sections = window.pageSections;
      if (!meta) return;

      const wpCode = generateWordPressBlocks(meta, sections);

      const blob = new Blob([wpCode], { type: 'text/html' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'podcast-wordpress-blocks.html';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }

    function generateWordPressBlocks(meta, sections) {
      const introText = (sections.despre_ce_e_vorba_ || sections.intro || '').replace(/^##[^\n]*\n/, '').trim();

      return `<!-- wp:cover {"customOverlayColor":"#ffffff","minHeight":400,"minHeightUnit":"px","isDark":false} -->
<div class="wp-block-cover is-light" style="min-height:400px"><span aria-hidden="true" class="wp-block-cover__background has-background-dim-100 has-background-dim" style="background-color:#ffffff"></span><div class="wp-block-cover__inner-container"><!-- wp:heading {"textAlign":"center","level":1,"style":{"typography":{"fontSize":"48px"},"color":{"text":"#3d3d3d"}}} -->
<h1 class="wp-block-heading has-text-align-center has-text-color" style="color:#3d3d3d;font-size:48px">${meta.title}</h1>
<!-- /wp:heading -->

<!-- wp:paragraph {"align":"center","style":{"color":{"text":"#6b6b6b"}}} -->
<p class="has-text-align-center has-text-color" style="color:#6b6b6b">${meta.subtitle || ''}</p>
<!-- /wp:paragraph --></div></div>
<!-- /wp:cover -->

<!-- wp:group {"style":{"spacing":{"padding":{"top":"80px","bottom":"80px"}}},"layout":{"type":"constrained","contentSize":"900px"}} -->
<div class="wp-block-group" style="padding-top:80px;padding-bottom:80px"><!-- wp:heading {"style":{"color":{"text":"#3d3d3d"}}} -->
<h2 class="wp-block-heading has-text-color" style="color:#3d3d3d">Despre ce e vorba?</h2>
<!-- /wp:heading -->

<!-- wp:paragraph {"style":{"color":{"text":"#6b6b6b"}}} -->
<p class="has-text-color" style="color:#6b6b6b">${introText}</p>
<!-- /wp:paragraph --></div>
<!-- /wp:group -->

<!-- wp:group {"style":{"color":{"background":"#f7f7f7"},"spacing":{"padding":{"top":"80px","bottom":"80px"}}},"layout":{"type":"constrained","contentSize":"900px"}} -->
<div class="wp-block-group has-background" style="background-color:#f7f7f7;padding-top:80px;padding-bottom:80px"><!-- wp:heading {"style":{"color":{"text":"#3d3d3d"}}} -->
<h2 class="wp-block-heading has-text-color" style="color:#3d3d3d">Ce oferim</h2>
<!-- /wp:heading -->

<!-- wp:list {"style":{"color":{"text":"#3d3d3d"}}} -->
<ul class="has-text-color" style="color:#3d3d3d">${(meta.format || []).map(item => `<!-- wp:list-item -->
<li>${item.text}</li>
<!-- /wp:list-item -->`).join('\n')}</ul>
<!-- /wp:list --></div>
<!-- /wp:group -->

<!-- wp:group {"style":{"spacing":{"padding":{"top":"80px","bottom":"80px"}}},"layout":{"type":"constrained","contentSize":"1100px"}} -->
<div class="wp-block-group" style="padding-top:80px;padding-bottom:80px"><!-- wp:heading {"textAlign":"center","style":{"color":{"text":"#3d3d3d"}}} -->
<h2 class="wp-block-heading has-text-align-center has-text-color" style="color:#3d3d3d">Pachete</h2>
<!-- /wp:heading -->

<!-- wp:columns {"style":{"spacing":{"blockGap":{"left":"24px"}}}} -->
<div class="wp-block-columns">${(meta.packages || []).map(pkg => `<!-- wp:column -->
<div class="wp-block-column"><!-- wp:group {"style":{"border":{"width":"${pkg.highlight ? '2px' : '1px'}","color":"${pkg.highlight ? '#3d3d3d' : '#e5e5e5'}","radius":"12px"},"spacing":{"padding":{"top":"32px","bottom":"32px","left":"32px","right":"32px"}}},"layout":{"type":"constrained"}} -->
<div class="wp-block-group has-border-color" style="border-color:${pkg.highlight ? '#3d3d3d' : '#e5e5e5'};border-width:${pkg.highlight ? '2px' : '1px'};border-radius:12px;padding-top:32px;padding-right:32px;padding-bottom:32px;padding-left:32px"><!-- wp:heading {"textAlign":"center","level":3,"style":{"color":{"text":"#3d3d3d"}}} -->
<h3 class="wp-block-heading has-text-align-center has-text-color" style="color:#3d3d3d">${pkg.name}${pkg.highlight ? ' - Recomandat' : ''}</h3>
<!-- /wp:heading -->

<!-- wp:paragraph {"align":"center","style":{"typography":{"fontSize":"40px","fontWeight":"700"},"color":{"text":"#3d3d3d"}}} -->
<p class="has-text-align-center has-text-color" style="color:#3d3d3d;font-size:40px;font-weight:700">${pkg.price} <span style="font-size:18px">${pkg.currency}</span></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph {"align":"center","style":{"color":{"text":"#6b6b6b"},"typography":{"fontSize":"13px"}}} -->
<p class="has-text-align-center has-text-color" style="color:#6b6b6b;font-size:13px">+ TVA / episod</p>
<!-- /wp:paragraph -->

<!-- wp:list {"style":{"color":{"text":"#6b6b6b"},"spacing":{"margin":{"top":"24px"}}}} -->
<ul class="has-text-color" style="color:#6b6b6b;margin-top:24px">${(pkg.deliverables || []).map(item => `<!-- wp:list-item -->
<li>${item}</li>
<!-- /wp:list-item -->`).join('\n')}</ul>
<!-- /wp:list --></div>
<!-- /wp:group --></div>
<!-- /wp:column -->`).join('\n')}</div>
<!-- /wp:columns -->

<!-- wp:paragraph {"align":"center","style":{"color":{"background":"#f7f7f7","text":"#6b6b6b"},"spacing":{"padding":{"top":"16px","bottom":"16px","left":"24px","right":"24px"},"margin":{"top":"32px"}},"border":{"radius":"8px"}}} -->
<p class="has-text-align-center has-text-color has-background" style="border-radius:8px;color:#6b6b6b;background-color:#f7f7f7;margin-top:32px;padding-top:16px;padding-right:24px;padding-bottom:16px;padding-left:24px">${meta.payment_terms || ''}</p>
<!-- /wp:paragraph --></div>
<!-- /wp:group -->

<!-- wp:group {"style":{"color":{"background":"#f7f7f7"},"spacing":{"padding":{"top":"80px","bottom":"80px"}}},"layout":{"type":"constrained","contentSize":"900px"}} -->
<div class="wp-block-group has-background" style="background-color:#f7f7f7;padding-top:80px;padding-bottom:80px"><!-- wp:heading {"style":{"color":{"text":"#3d3d3d"}}} -->
<h2 class="wp-block-heading has-text-color" style="color:#3d3d3d">Echipa</h2>
<!-- /wp:heading -->

<!-- wp:columns {"style":{"spacing":{"blockGap":{"left":"24px"}}}} -->
<div class="wp-block-columns">${(meta.team || []).map(m => `<!-- wp:column -->
<div class="wp-block-column"><!-- wp:group {"style":{"color":{"background":"#ffffff"},"spacing":{"padding":{"top":"24px","bottom":"24px","left":"24px","right":"24px"}},"border":{"radius":"8px","width":"1px","color":"#e5e5e5"}},"layout":{"type":"constrained"}} -->
<div class="wp-block-group has-border-color has-background" style="border-color:#e5e5e5;border-width:1px;border-radius:8px;background-color:#ffffff;padding-top:24px;padding-right:24px;padding-bottom:24px;padding-left:24px"><!-- wp:heading {"textAlign":"center","level":3,"style":{"color":{"text":"#3d3d3d"},"typography":{"fontSize":"16px"}}} -->
<h3 class="wp-block-heading has-text-align-center has-text-color" style="color:#3d3d3d;font-size:16px">${m.name}</h3>
<!-- /wp:heading -->

<!-- wp:paragraph {"align":"center","style":{"color":{"text":"#6b6b6b"},"typography":{"fontSize":"14px"}}} -->
<p class="has-text-align-center has-text-color" style="color:#6b6b6b;font-size:14px">${m.role}</p>
<!-- /wp:paragraph --></div>
<!-- /wp:group --></div>
<!-- /wp:column -->`).join('\n')}</div>
<!-- /wp:columns --></div>
<!-- /wp:group -->

<!-- wp:group {"style":{"spacing":{"padding":{"top":"80px","bottom":"80px"}}},"layout":{"type":"constrained","contentSize":"900px"}} -->
<div class="wp-block-group" style="padding-top:80px;padding-bottom:80px"><!-- wp:heading {"style":{"color":{"text":"#3d3d3d"}}} -->
<h2 class="wp-block-heading has-text-color" style="color:#3d3d3d">Pentru cine e acest serviciu?</h2>
<!-- /wp:heading -->

<!-- wp:columns {"style":{"spacing":{"blockGap":{"left":"12px","top":"12px"}}}} -->
<div class="wp-block-columns">${(meta.ideal_for || []).reduce((acc, item, i) => {
  const colIndex = i % 2;
  if (!acc[colIndex]) acc[colIndex] = [];
  acc[colIndex].push(item);
  return acc;
}, []).map(col => `<!-- wp:column -->
<div class="wp-block-column">${col.map(item => `<!-- wp:paragraph {"style":{"color":{"background":"#ffffff","text":"#3d3d3d"},"spacing":{"padding":{"top":"12px","bottom":"12px","left":"16px","right":"16px"}},"border":{"radius":"6px","width":"1px","color":"#e5e5e5"}}} -->
<p class="has-text-color has-background has-border-color" style="border-color:#e5e5e5;border-width:1px;border-radius:6px;color:#3d3d3d;background-color:#ffffff;padding-top:12px;padding-right:16px;padding-bottom:12px;padding-left:16px">${item}</p>
<!-- /wp:paragraph -->`).join('\n')}</div>
<!-- /wp:column -->`).join('\n')}</div>
<!-- /wp:columns --></div>
<!-- /wp:group -->

<!-- wp:cover {"customOverlayColor":"#3d3d3d","minHeight":300,"minHeightUnit":"px","isDark":false} -->
<div class="wp-block-cover is-light" style="min-height:300px"><span aria-hidden="true" class="wp-block-cover__background has-background-dim-100 has-background-dim" style="background-color:#3d3d3d"></span><div class="wp-block-cover__inner-container"><!-- wp:heading {"textAlign":"center","style":{"color":{"text":"#ffffff"}}} -->
<h2 class="wp-block-heading has-text-align-center has-text-color" style="color:#ffffff">Hai să vorbim</h2>
<!-- /wp:heading -->

<!-- wp:paragraph {"align":"center","style":{"color":{"text":"#cccccc"}}} -->
<p class="has-text-align-center has-text-color" style="color:#cccccc">${meta.cta_subtitle || ''}</p>
<!-- /wp:paragraph -->

<!-- wp:buttons {"layout":{"type":"flex","justifyContent":"center"},"style":{"spacing":{"margin":{"top":"32px"}}}} -->
<div class="wp-block-buttons" style="margin-top:32px"><!-- wp:button {"style":{"color":{"background":"#ffffff","text":"#3d3d3d"},"border":{"radius":"6px"},"spacing":{"padding":{"top":"14px","bottom":"14px","left":"32px","right":"32px"}}}} -->
<div class="wp-block-button"><a class="wp-block-button__link has-text-color has-background wp-element-button" href="mailto:hello@altnivel.studio" style="border-radius:6px;color:#3d3d3d;background-color:#ffffff;padding-top:14px;padding-right:32px;padding-bottom:14px;padding-left:32px">hello@altnivel.studio</a></div>
<!-- /wp:button --></div>
<!-- /wp:buttons --></div></div>
<!-- /wp:cover -->

<!-- wp:group {"style":{"color":{"background":"#3d3d3d"},"spacing":{"padding":{"top":"40px","bottom":"40px"}}},"layout":{"type":"constrained"}} -->
<div class="wp-block-group has-background" style="background-color:#3d3d3d;padding-top:40px;padding-bottom:40px"><!-- wp:paragraph {"align":"center","style":{"color":{"text":"#ffffff"}}} -->
<p class="has-text-align-center has-text-color" style="color:#ffffff">Alt Nivel Studio - Două etaje mai sus, infinit la creativitate</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph {"align":"center","style":{"color":{"text":"#aaaaaa"}}} -->
<p class="has-text-align-center has-text-color" style="color:#aaaaaa">hello@altnivel.studio | altnivel.studio</p>
<!-- /wp:paragraph --></div>
<!-- /wp:group -->`;
    }

    loadContent();
  </script>
</body>
</html>
